<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta
            name="description"
            content="ZX Spectrum emulator for the browser"
        />
        <meta name="theme-color" content="#0a0a0b" />
        <title>ZX Spectrum Emulator</title>
    </head>
    <body>
        <div id="app">
            <header>
                <div class="header-left">
                    <svg class="header-logo" viewBox="0 0 446 138" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="ZX Spectrum">
                        <path fill="#00a7e1" d="M 338.290009 0 L 308.726013 0 L 406.81601 138 L 436.391998 138 Z"/>
                        <path fill="#3d9b00" d="M 308.726013 0 L 279.151001 0 L 377.240997 138 L 406.81601 138 Z"/>
                        <path fill="#ffc610" d="M 279.151001 0 L 249.574997 0 L 347.665009 138 L 377.240997 138 Z"/>
                        <path fill="#ff1f1f" d="M 249.574997 0 L 220 0 L 318.101013 138 L 347.665009 138 Z"/>
                        <path fill="currentColor" fill-rule="evenodd" d="M 78.559998 29.220001 L 78.559998 69.669998 L 90.760002 69.669998 L 90.760002 29.220001 L 78.559998 29.220001 Z M 322.069 29.220001 L 322.069 69.669998 L 334.269989 69.669998 L 334.269989 29.220001 L 322.069 29.220001 Z M 235.089996 16 L 235.089996 69.68 L 247.289993 69.68 L 247.289993 16 L 235.089996 16 Z M 93.978996 29.220001 L 93.978996 69.669998 L 106.179001 69.669998 L 106.179001 38.880005 L 149.119003 38.880005 L 149.119003 69.669998 L 161.307999 69.669998 L 161.307999 29.220001 L 93.978996 29.220001 Z M 404.819 29.220001 L 337.489014 29.220001 L 337.489014 69.669998 L 349.678986 69.669998 L 349.678986 38.880005 L 404.819 38.880005 L 404.819 29.220001 Z M 8 54.279999 L 63.040001 54.279999 L 63.040001 60.029999 L 8 60.029999 L 8 69.670998 L 75.220001 69.670998 L 75.220001 44.630005 L 20.1 44.630005 L 20.1 38.880005 L 75.319 38.880005 L 75.319 29.220001 L 8 29.220001 L 8 54.279999 Z M 164.529999 29.220001 L 164.529999 69.669998 L 231.860001 69.669998 L 231.860001 60.028999 L 176.729004 60.028999 L 176.729004 38.880005 L 231.860001 38.880005 L 231.860001 29.220001 L 164.529999 29.220001 Z M 262.709991 60.028999 L 262.709991 54.278999 L 306.190002 54.278999 L 306.190002 60.028999 L 262.709991 60.028999 Z M 250.5 29.220001 L 250.5 38.880005 L 306.179993 38.880005 L 306.179993 44.630005 L 250.5 44.630005 L 250.5 69.669998 L 318.851013 69.669998 L 318.851013 29.220001 L 250.5 29.220001 Z M 78.559998 16 L 78.559998 25.650002 L 90.760002 25.650002 L 90.760002 16 L 78.559998 16 Z M 322.059998 16 L 322.059998 25.650002 L 334.26001 25.650002 L 334.26001 16 L 322.059998 16 Z"/>
                        <path fill="#00a7e1" fill-rule="evenodd" d="M 8 115.939003 L 8 121.778999 L 36.419998 121.778999 L 36.419998 115.559998 L 17.870001 115.559998 L 35.939999 93.949997 L 35.939999 88.099998 L 9.42 88.099998 L 9.42 94.330002 L 26.08 94.330002 L 8 115.939003 Z M 49.490002 104.150002 L 37.669998 121.82 L 46.029999 121.82 L 53.540001 110.150002 L 60.900002 121.82 L 69.730003 121.82 L 57.98 104.209999 L 68.790001 88.099998 L 60.669998 88.099998 L 53.830002 98.870003 L 47.220001 88.099998 L 38.630001 88.099998 L 49.490002 104.150002 Z M 81.440002 110.599998 L 74.260002 110.610001 C 74.169998 118.920998 81.160004 122.599998 88.610001 122.599998 C 97.769997 122.599998 102.629997 117.971001 102.629997 111.779999 C 102.629997 104.140999 95.080002 102.581001 92.620003 101.960999 C 84.169998 99.791 82.57 99.460999 82.57 96.860001 C 82.57 94.029999 85.300003 93.029999 87.669998 93.029999 C 91.199997 93.029999 94.080002 94.070999 94.32 98.130997 L 101.489998 98.130997 C 101.489998 90.341003 95.019997 87.279999 87.989998 87.279999 C 81.910004 87.279999 75.389999 90.581001 75.389999 97.481003 C 75.389999 103.800003 80.449997 105.750999 85.449997 107.060997 C 90.400002 108.379997 95.459999 108.990997 95.459999 112.629997 C 95.459999 116.07 91.489998 116.830002 88.889999 116.830002 C 84.93 116.830002 81.440002 115.089996 81.440002 110.599998 Z M 123.010002 109.660004 C 123.010002 113.620003 121.610001 117.400002 117.209999 117.410004 C 112.860001 117.410004 111.349998 113.620003 111.349998 109.660004 C 111.349998 105.699997 112.769997 101.778999 117.150002 101.778999 C 121.449997 101.778999 123.010002 105.790001 123.010002 109.660004 Z M 104.900002 97.400002 L 104.900002 130.399994 L 111.589996 130.399994 L 111.589996 118.778999 L 111.68 118.778999 C 113.290001 121.189003 116.080002 122.459999 119 122.459999 C 126.129997 122.459999 129.720001 116.379997 129.720001 109.859001 C 129.720001 102.919998 126.269997 96.739998 118.629997 96.739998 C 115.610001 96.739998 112.970001 97.910004 111.360001 100.510002 L 111.269997 100.510002 L 111.269997 97.400002 L 104.900002 97.400002 Z M 148.75 106.971001 L 137.839996 106.971001 C 137.929993 105.089996 139.160004 101.779999 143.410004 101.779999 C 146.669998 101.778999 148.130005 103.57 148.75 106.971001 Z M 137.839996 111.209999 L 155.460007 111.209999 C 155.919998 103.699997 151.919998 96.721001 143.600006 96.721001 C 136.190002 96.721001 131.139999 102.290001 131.139999 109.610001 C 131.139999 117.161003 135.899994 122.450996 143.600006 122.450996 C 149.130005 122.450996 153.139999 120.000999 155.031006 114.240997 L 149.130997 114.240997 C 148.701004 115.750999 146.531006 117.401001 143.841003 117.401001 C 140.110001 117.400002 138.029999 115.471001 137.839996 111.209999 Z M 174.610001 105.989998 L 181.179001 106 C 180.759003 99.778999 175.468994 96.75 169.709 96.75 C 161.770004 96.75 157.238007 102.359001 157.238007 109.959999 C 157.238007 117.290001 162.199005 122.481003 169.557999 122.481003 C 175.977997 122.481003 180.468002 118.93 181.307999 112.459999 L 174.837997 112.459999 C 174.417999 115.43 172.617996 117.419998 169.507996 117.419998 C 165.307999 117.419998 163.938995 113.221001 163.938995 109.731003 C 163.938995 106.140999 165.348007 101.791 169.647995 101.791 C 172.429993 101.790001 174.179993 103.260002 174.610001 105.989998 Z M 192.158997 97.400002 L 192.158997 90.089996 L 185.449997 90.089996 L 185.449997 97.410004 L 181.389008 97.410004 L 181.389008 101.900002 L 185.449997 101.900002 L 185.449997 116.290001 C 185.449997 121.150002 189.050003 122.099998 193.158997 122.099998 C 194.470001 122.099998 195.929993 122.050003 197.069 121.860001 L 197.069 116.621002 C 196.369995 116.761002 195.699997 116.810997 195 116.810997 C 192.729004 116.810997 192.158997 116.240997 192.158997 113.971001 L 192.158997 101.879997 L 197.069 101.879997 L 197.069 97.400002 L 192.158997 97.400002 Z M 198.869995 97.400002 L 198.860001 121.809998 L 205.569 121.809998 L 205.569 110.800003 C 205.569 106.5 207.259003 102.971001 212.169998 102.971001 C 212.979996 102.971001 213.970001 103.060997 214.578995 103.199997 L 214.578995 96.971001 C 214.158997 96.830002 213.589996 96.740997 213.119995 96.740997 C 209.860001 96.740997 206.559006 98.860001 205.328995 101.93 L 205.238998 101.93 L 205.238998 97.400002 L 198.869995 97.400002 Z M 238.699997 121.790001 L 238.699997 97.400002 L 231.988998 97.400002 L 231.988998 110.189003 C 231.988998 115.139999 230.440002 117.168999 226.800003 117.168999 C 223.690994 117.168999 222.509995 115.198997 222.509995 111.179001 L 222.509995 97.400002 L 215.800003 97.400002 L 215.800003 112.400002 C 215.800003 118.439003 217.600006 122.449997 224.729996 122.449997 C 227.550003 122.449997 230.490005 121.120003 232.179993 118.389999 L 232.328995 118.389999 L 232.328995 121.789001 L 238.699997 121.789001 Z M 242.559998 97.400002 L 242.559998 121.778999 L 249.270996 121.778999 L 249.270996 107.620003 C 249.270996 102.859001 252.479996 102.010002 253.800003 102.010002 C 258.049988 102.010002 257.860992 105.269997 257.860992 108.099998 L 257.860992 121.779999 L 264.570007 121.779999 L 264.570007 108.190002 C 264.570007 105.121002 265.290985 102.010002 269.059998 102.010002 C 272.890015 102.010002 273.170013 104.699997 273.170013 107.959999 L 273.170013 121.82 L 279.869995 121.82 L 279.869995 105.480003 C 279.869995 99.150002 276.130005 96.739998 270.940002 96.739998 C 267.540009 96.739998 265 98.679001 263.57901 100.800003 C 262.25 97.879997 259.519989 96.739998 256.450012 96.739998 C 253.289993 96.739998 250.738998 98.199997 248.988998 100.699997 L 248.899002 100.699997 L 248.899002 97.400002 L 242.559998 97.400002 Z"/>
                    </svg>
                    <span class="version-chip">v0.1</span>
                </div>
                <nav class="header-controls">
                    <!-- Power button with SVG icon -->
                    <button
                        id="btn-power"
                        class="control-btn power-btn off"
                        title="Power On"
                    >
                        <svg
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                        >
                            <path d="M12 2v10M18.4 6.6a9 9 0 1 1-12.8 0" />
                        </svg>
                    </button>

                    <!-- Reset text button -->
                    <button
                        id="btn-reset"
                        class="header-text-btn"
                        title="Reset"
                    >
                        Reset
                    </button>

                    <!-- File menu -->
                    <div class="header-menu-container" id="file-menu-container">
                        <button class="header-menu-trigger" id="btn-file-menu">
                            <span>File</span>
                            <svg
                                class="menu-chevron"
                                viewBox="0 0 12 12"
                                width="10"
                                height="10"
                            >
                                <path
                                    d="M3 5l3 3 3-3"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="1.5"
                                />
                            </svg>
                        </button>
                        <div class="header-menu" id="file-menu">
                            <button
                                class="header-menu-item"
                                id="btn-load-snapshot"
                            >
                                <span>Load Snapshot...</span>
                            </button>
                        </div>
                    </div>

                    <!-- View menu -->
                    <div class="header-menu-container" id="view-menu-container">
                        <button class="header-menu-trigger" id="btn-view-menu">
                            <span>View</span>
                            <svg
                                class="menu-chevron"
                                viewBox="0 0 12 12"
                                width="10"
                                height="10"
                            >
                                <path
                                    d="M3 5l3 3 3-3"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="1.5"
                                />
                            </svg>
                        </button>
                        <div class="header-menu" id="view-menu">
                            <div class="header-menu-item theme-selector-row">
                                <span>Theme</span>
                                <div class="theme-btn-group">
                                    <button
                                        class="theme-btn"
                                        data-theme="light"
                                        title="Light"
                                    >
                                        <svg
                                            viewBox="0 0 24 24"
                                            fill="none"
                                            stroke="currentColor"
                                            stroke-width="2"
                                        >
                                            <circle cx="12" cy="12" r="5" />
                                            <path
                                                d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"
                                            />
                                        </svg>
                                    </button>
                                    <button
                                        class="theme-btn"
                                        data-theme="dark"
                                        title="Dark"
                                    >
                                        <svg
                                            viewBox="0 0 24 24"
                                            fill="none"
                                            stroke="currentColor"
                                            stroke-width="2"
                                        >
                                            <path
                                                d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"
                                            />
                                        </svg>
                                    </button>
                                    <button
                                        class="theme-btn"
                                        data-theme="system"
                                        title="System"
                                    >
                                        <svg
                                            viewBox="0 0 24 24"
                                            fill="none"
                                            stroke="currentColor"
                                            stroke-width="2"
                                        >
                                            <rect
                                                x="2"
                                                y="3"
                                                width="20"
                                                height="14"
                                                rx="2"
                                                ry="2"
                                            />
                                            <line
                                                x1="8"
                                                y1="21"
                                                x2="16"
                                                y2="21"
                                            />
                                            <line
                                                x1="12"
                                                y1="17"
                                                x2="12"
                                                y2="21"
                                            />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="header-menu-separator"></div>
                            <button class="header-menu-item" id="btn-display">
                                <span>Display</span>
                            </button>
                            <button
                                class="header-menu-item"
                                id="btn-tape-player"
                            >
                                <span>Tape Player</span>
                            </button>
                            <button
                                class="header-menu-item"
                                id="btn-sound-debug"
                            >
                                <span>Sound</span>
                            </button>
                        </div>
                    </div>

                    <!-- Dev menu -->
                    <div class="header-menu-container" id="dev-menu-container">
                        <button class="header-menu-trigger" id="btn-dev-menu">
                            <span>Dev</span>
                            <svg
                                class="menu-chevron"
                                viewBox="0 0 12 12"
                                width="10"
                                height="10"
                            >
                                <path
                                    d="M3 5l3 3 3-3"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="1.5"
                                />
                            </svg>
                        </button>
                        <div class="header-menu" id="dev-menu">
                            <button class="header-menu-item" id="btn-z80-debug">
                                <span>Z80 Debugger</span>
                            </button>
                            <button
                                class="header-menu-item"
                                id="btn-stack-viewer"
                            >
                                <span>Stack Viewer</span>
                            </button>
                        </div>
                    </div>

                    <!-- Control group: fullscreen + sound -->
                    <div class="control-group">
                        <button
                            id="btn-fullscreen"
                            class="control-btn"
                            title="Fullscreen"
                            aria-label="Fullscreen"
                        >
                            <svg
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                            >
                                <path
                                    d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"
                                />
                            </svg>
                        </button>
                        <div class="sound-control-wrapper">
                            <button
                                id="btn-sound"
                                class="control-btn"
                                title="Sound Settings"
                                aria-label="Sound Settings"
                            >
                                <svg
                                    class="icon-unmuted"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                >
                                    <path d="M11 5L6 9H2v6h4l5 4V5z" />
                                    <path
                                        d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"
                                    />
                                </svg>
                                <svg
                                    class="icon-muted hidden"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                >
                                    <path d="M11 5L6 9H2v6h4l5 4V5z" />
                                    <line x1="23" y1="9" x2="17" y2="15" />
                                    <line x1="17" y1="9" x2="23" y2="15" />
                                </svg>
                            </button>
                            <div id="sound-popup" class="sound-popup hidden">
                                <div class="sound-popup-row">
                                    <label for="volume-slider">Volume</label>
                                    <input
                                        type="range"
                                        id="volume-slider"
                                        min="0"
                                        max="100"
                                        value="50"
                                    />
                                    <span id="volume-value" aria-live="polite"
                                        >50%</span
                                    >
                                </div>
                                <div class="sound-popup-row">
                                    <label>Mute</label>
                                    <label class="toggle-switch">
                                        <input
                                            type="checkbox"
                                            id="mute-toggle"
                                        />
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </nav>
            </header>

            <main>
                <div class="emulator-section">
                    <div id="monitor-frame">
                        <canvas id="screen"></canvas>
                    </div>
                </div>
            </main>

            <div id="loading">
                <p>Initializing ZX Spectrum...</p>
            </div>
        </div>

        <script type="module" src="/src/js/main.js"></script>
    </body>
</html>
